baseURL = 'https://edibleloughborough.org.uk/'
languageCode = 'en-gb'
title = 'Incredible Edible Loughborough'
disableKinds = ['taxonomy', 'term']
ignoreLogs = ['warning-goldmark-raw-html']
enableRobotsTXT = true

[minify]
  minifyOutput = true

[params]
  shortTitle = "IEL"
  contactEmailAddress = "ediblelboro@gmail.com"
  breakpointXl = "1260px"
  breakpointLg = "992px"
  breakpointMd = "768px"
  breakpointSm = "576px"
  author.name = "Michael Fraser"

[permalinks]
  pages = "/:slug/"

[markup]
  [markup.goldmark]
    [markup.goldmark.renderer]
      unsafe = true # Often needed for Bootstrap components in Markdown

[build]
  writeStats = true # Generates hugo_stats.json (required if you use PurgeCSS later)
  
[[module.mounts]]
  source = "assets"
  target = "assets"

[[module.mounts]]
  source = "node_modules/bootstrap/scss"
  target = "assets/scss/bootstrap"

[[module.mounts]]
  source = "node_modules/bootstrap"
  target = "assets/js/bootstrap"

[server]
  [[server.headers]]
    for = "/**"
    [server.headers.values]
      Strict-Transport-Security = "max-age=31536000; includeSubDomains; preload"
      
      # THE FIX: Removed all style hashes. 
      # This allows 'unsafe-inline' to actually work for Elfsight across all pages.
      Content-Security-Policy = "default-src 'self'; script-src 'self' https://elfsightcdn.com *.elfsightcdn.com https://www.google.com https://www.gstatic.com 'unsafe-inline' 'unsafe-eval' 'unsafe-hashes'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com *.elfsightcdn.com https://www.gstatic.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https: *.elfsightcdn.com; frame-src 'self' *.elfsight.com https://www.google.com; connect-src 'self' *.elfsight.com; object-src 'none'; base-uri 'self'; frame-ancestors 'self';"
      
      X-Content-Type-Options = "nosniff"
      X-Frame-Options = "SAMEORIGIN"
      Referrer-Policy = "strict-origin-when-cross-origin"
      Permissions-Policy = "camera=(), microphone=(), geolocation=(), usb=(), payment=()"
      Cross-Origin-Opener-Policy = "same-origin"
      Cross-Origin-Embedder-Policy = "unsafe-none"

  [[server.headers]]
    for = "/admin/**"
    [server.headers.values]
      Content-Security-Policy = "default-src 'self'; frame-src 'self' https://identity.netlify.com; frame-ancestors 'self' https://identity.netlify.com; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://unpkg.com https://identity.netlify.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https: blob:; connect-src 'self' https://unpkg.com https://api.github.com https://identity.netlify.com https://www.netlifystatus.com;"
      X-Frame-Options = "SAMEORIGIN"  